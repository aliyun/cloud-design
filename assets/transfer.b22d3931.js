import{D as e,u as t,o as a,i as r,_ as n,d as o,e as i,f as l,g as s,r as h,p as d,V as u,W as c,X as p,M as f,j as g,c as m,b as v,t as b,y}from"./index.e23bfa0a.js";var C,D,S,V,k=e.Item,O=e.CheckboxItem,x=t.bindCtx,E=a.pickOthers,I=r.getOffset,N=(D=C=function(e){function t(a){o(this,t);var r=i(this,e.call(this,a));return r.state={highlight:!1},x(r,["getItemDOM","handleClick","handleDragStart","handleDragOver","handleDragEnd","handleDrop"]),r}return n(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.needHighlight&&(this.addHighlightTimer=setTimeout((function(){e.setState({highlight:!0})}),1),this.removeHighlightTimer=setTimeout((function(){e.setState({highlight:!1})}),201))},t.prototype.componentWillUnmount=function(){clearTimeout(this.addHighlightTimer),clearTimeout(this.removeHighlightTimer)},t.prototype.getItemDOM=function(e){this.item=e},t.prototype.handleClick=function(){var e=this.props;(0,e.onClick)("left"===e.panelPosition?"right":"left",e.item.value)},t.prototype.handleDragStart=function(e){e&&e.dataTransfer&&"function"==typeof e.dataTransfer.setData&&e.dataTransfer.setData("text/plain",e.target.id);var t=this.props;(0,t.onDragStart)(t.panelPosition,t.item.value)},t.prototype.getDragGap=function(e){var t=I(e.currentTarget).top,a=e.currentTarget.offsetHeight;return e.pageY<=t+a/2?"before":"after"},t.prototype.handleDragOver=function(e){var t=this.props,a=t.panelPosition,r=t.dragPosition,n=t.onDragOver,o=t.item;if(a===r){e.preventDefault();var i=this.getDragGap(e);this.dragGap!==i&&(this.dragGap=i,n(o.value))}},t.prototype.handleDragEnd=function(){(0,this.props.onDragEnd)()},t.prototype.handleDrop=function(e){e.preventDefault();var t=this.props,a=t.onDrop,r=t.item;a(t.panelPosition,t.dragValue,r.value,this.dragGap)},t.prototype.render=function(){var e,a=this.props,r=a.prefix,n=a.mode,o=a.checked,i=a.disabled,d=a.item,u=a.onCheck,c=a.itemRender,p=a.draggable,f=a.dragOverValue,g=a.panelPosition,m=a.dragPosition,v=E(Object.keys(t.propTypes),this.props),b=this.state.highlight,y="simple"===n,C=l(((e={})[r+"transfer-panel-item"]=!0,e[r+"insert-"+this.dragGap]=f===d.value&&g===m,e[r+"focused"]=b,e[r+"simple"]=y,e)),D=c(d),S=s({ref:this.getItemDOM,className:C,children:D,disabled:i,draggable:p&&!i,onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragEnd:this.handleDragEnd,onDrop:this.handleDrop},v),V=void 0;return"string"==typeof D&&(V=D),y?(S.disabled||(S.onClick=this.handleClick),h.createElement(k,s({title:V},S))):h.createElement(O,s({checked:o,onChange:u.bind(this,d.value),title:V},S))},t}(h.Component),C.menuChildType=O.menuChildType,C.propTypes={prefix:d.string,mode:d.oneOf(["normal","simple"]),value:d.array,disabled:d.bool,item:d.object,onCheck:d.func,onClick:d.func,needHighlight:d.bool,itemRender:d.func,draggable:d.bool,onDragStart:d.func,onDragOver:d.func,onDragEnd:d.func,onDrop:d.func,dragPosition:d.oneOf(["left","right"]),dragValue:d.string,dragOverValue:d.string,panelPosition:d.oneOf(["left","right"])},D);N.displayName="TransferItem";var T,P,M=t.bindCtx,A=(V=S=function(t){function a(e,r){o(this,a);var n=i(this,t.call(this,e,r));return n.state={searchedValue:"",dragValue:null,dragOverValue:null},n.footerId=e.baseId?u.escapeForId(e.baseId+"-panel-footer-"+e.position):"",n.headerId=e.baseId?u.escapeForId(e.baseId+"-panel-header-"+e.position):"",M(n,["handleCheck","handleAllCheck","handleSearch","handleItemDragStart","handleItemDragOver","handleItemDragEnd","handleItemDrop","getListDOM"]),n.firstRender=!0,n}return n(a,t),a.prototype.componentDidMount=function(){this.firstRender=!1},a.prototype.componentDidUpdate=function(e){e.dataSource.length!==this.props.dataSource.length&&this.list&&this.list.scrollTop>0&&(this.list.scrollTop=0),this.searched=!1},a.prototype.getListDOM=function(e){this.list=e},a.prototype.getListData=function(e,t){var a=this,r=this.props,n=r.prefix,o=r.position,i=r.mode,l=r.value,d=r.onMove,u=r.disabled,c=r.itemRender,p=r.sortable,f=this.state,g=f.dragPosition,m=f.dragValue,v=f.dragOverValue;return e.map((function(e){var r="title"in e?{title:e.title}:{};return h.createElement(N,s({key:e.value,prefix:n,mode:i,checked:l.indexOf(e.value)>-1,disabled:u||e.disabled,item:e,onCheck:a.handleCheck,onClick:d,needHighlight:!a.firstRender&&!a.searched&&!t,itemRender:c,draggable:p,onDragStart:a.handleItemDragStart,onDragOver:a.handleItemDragOver,onDragEnd:a.handleItemDragEnd,onDrop:a.handleItemDrop,dragPosition:g,dragValue:m,dragOverValue:v,panelPosition:o},r))}))},a.prototype.handleAllCheck=function(e){var t=this.props,a=t.position,r=t.onChange,n=t.filter,o=this.state.searchedValue,i=void 0;i=e?o?this.enabledDatasource.filter((function(e){return n(o,e)})).map((function(e){return e.value})):this.enabledDatasource.map((function(e){return e.value})):[],r&&r(a,i)},a.prototype.handleCheck=function(e,t){var a=this.props,r=a.position,n=a.value,o=a.onChange,i=[].concat(n),l=n.indexOf(e);t&&-1===l?i.push(e):!t&&l>-1&&i.splice(l,1),o&&o(r,i)},a.prototype.handleSearch=function(e){this.setState({searchedValue:e}),this.searched=!0;var t=this.props;(0,t.onSearch)(e,t.position)},a.prototype.handleItemDragStart=function(e,t){this.setState({dragPosition:e,dragValue:t})},a.prototype.handleItemDragOver=function(e){this.setState({dragOverValue:e})},a.prototype.handleItemDragEnd=function(){this.setState({dragOverValue:null})},a.prototype.handleItemDrop=function(){var e;this.setState({dragOverValue:null}),(e=this.props).onSort.apply(e,arguments)},a.prototype.renderHeader=function(){var e=this.props,t=e.title,a=e.prefix;return h.createElement("div",{id:this.headerId,className:a+"transfer-panel-header"},t)},a.prototype.renderSearch=function(){var e=this.props,t=e.prefix,a=e.searchPlaceholder,r=e.locale;return h.createElement(c,{"aria-labelledby":this.headerId,shape:"simple",className:t+"transfer-panel-search",placeholder:a||r.searchPlaceholder,onChange:this.handleSearch})},a.prototype.renderList=function(t){var a,r=this.props,n=r.prefix,o=r.listClassName,i=r.listStyle,d=r.customerList,u=r.useVirtual,c=l(((a={})[n+"transfer-panel-list"]=!0,a[o]=!!o,a)),f=d&&d(this.props);return f?h.createElement("div",{className:c,style:i,ref:this.getListDOM},f):t.length?u?h.createElement("div",{className:c,style:s({position:"relative"},i)},h.createElement(p,{itemsRenderer:function(t,a){return h.createElement(e,{style:{border:"none"},ref:a},t)}},this.getListData(t,!0))):h.createElement(e,{className:c,style:i,ref:this.getListDOM},this.getListData(t)):h.createElement("div",{className:c,style:i},this.renderNotFoundContent())},a.prototype.renderNotFoundContent=function(){var e=this.props,t=e.prefix,a=e.notFoundContent;return h.createElement("div",{className:t+"transfer-panel-not-found-container"},h.createElement("div",{className:t+"transfer-panel-not-found"},a))},a.prototype.renderFooter=function(){var e=this.props,t=e.prefix,a=e.position,r=e.mode,n=e.disabled,o=e.locale,i=e.showCheckAll;if("simple"===r){var s,d=this.props.onMoveAll,u=l(((s={})[t+"transfer-panel-move-all"]=!0,s[t+"disabled"]=n,s));return h.createElement("div",{className:t+"transfer-panel-footer"},h.createElement("a",{className:u,onClick:d.bind(this,"left"===a?"right":"left")},o.moveAll))}var c=this.props,p=c.value,g=c.showSearch,m=c.filter,v=c.dataSource,b=this.state.searchedValue,y=v.length,C=v,D=p.length,S=D;g&&b&&(y=(C=v.filter((function(e){return m(b,e)}))).length,S=C.filter((function(e){return p.includes(e.value)})).length);var V=Math.min(y,this.enabledDatasource.length),k=D>0&&D>=V,O=D>0&&S>=0&&S<V,x=y>1?o.items:o.item,E=0===D?y+" "+x:D+"/"+y+" "+x;return h.createElement("div",{className:t+"transfer-panel-footer"},i&&h.createElement(f,{disabled:n,checked:k,indeterminate:O,onChange:this.handleAllCheck,"aria-labelledby":this.footerId}),h.createElement("span",{className:t+"transfer-panel-count",id:this.footerId},E))},a.prototype.render=function(){var e=this.props,t=e.prefix,a=e.title,r=e.showSearch,n=e.filter,o=e.dataSource,i=this.state.searchedValue,l=this.props.dataSource;return this.enabledDatasource=o.filter((function(e){return!e.disabled})),r&&i&&(l=o.filter((function(e){return n(i,e)}))),h.createElement("div",{className:t+"transfer-panel"},a?this.renderHeader():null,r?this.renderSearch():null,this.renderList(l),this.renderFooter())},a}(h.Component),S.propTypes={prefix:d.string,position:d.oneOf(["left","right"]),mode:d.oneOf(["normal","simple"]),dataSource:d.array,value:d.array,onChange:d.func,onMove:d.func,onMoveAll:d.func,disabled:d.bool,locale:d.object,title:d.node,showSearch:d.bool,filter:d.func,onSearch:d.func,searchPlaceholder:d.string,notFoundContent:d.node,listClassName:d.string,listStyle:d.object,itemRender:d.func,sortable:d.bool,onSort:d.func,baseId:d.string,customerList:d.func,useVirtual:d.bool,showCheckAll:d.bool},V);A.displayName="TransferPanel";var R=m.config,w=t.bindCtx,L=a.pickOthers,F=function(e,t){return e.map((function(e){return e.value})).filter((function(e){return-1===t.indexOf(e)}))},j=function(e,t,a){var r={left:[],right:[]};(e.length||t.length)&&a.map((function(e){return e.value})).forEach((function(a){e.indexOf(a)>-1?r.left.push(a):t.indexOf(a)>-1&&r.right.push(a)}));return r},H=(P=T=function(e){function t(a,r){o(this,t);var n=i(this,e.call(this,a,r)),l=a.value,s=a.defaultValue,d=a.defaultLeftChecked,u=a.defaultRightChecked,c=a.dataSource,p=a.rtl,f=a.operations;0===f.length&&(f.push(h.createElement(v,{rtl:p,type:"arrow-right"})),f.push(h.createElement(v,{rtl:p,type:"arrow-left"})));var g=j(t.normalizeValue(d),t.normalizeValue(u),c),m=g.left,b=g.right,y=t.normalizeValue("value"in a?l:s);return n.state={value:y,leftCheckedValue:m,rightCheckedValue:b,leftValue:F(c,y)},w(n,["handlePanelChange","handlePanelSort","handleMoveItem","handleSimpleMove","handleSimpleMoveAll"]),n}return n(t,e),t.normalizeValue=function(e){return e?Array.isArray(e)?e:[e]:[]},t.getDerivedStateFromProps=function(e,a){var r=a.innerUpdate,n=a.value,o=a.leftValue;if(r)return{innerUpdate:!1,value:n,leftValue:o};var i={},l=void 0;if("value"in e){var s=t.normalizeValue(e.value);i.value=s,l=s}else l=a.value;i.leftValue=F(e.dataSource,l);var h=j(a.leftCheckedValue,a.rightCheckedValue,e.dataSource),d=h.left,u=h.right;return i.leftCheckedValue=d,i.rightCheckedValue=u,i},t.prototype.groupDatasource=function(e,t,a){return e.reduce((function(e,r){var n=t.indexOf(r);return n>-1&&e.push(a[n]),e}),[])},t.prototype.handlePanelChange=function(e,t){var a,r=this.state,n=r.leftCheckedValue,o=r.rightCheckedValue,i=this.props.onSelect,l="left"===e?"leftCheckedValue":"rightCheckedValue";this.setState(((a={innerUpdate:!0})[l]=t,a)),i&&i("left"===e?t:n,"left"===e?o:t,"left"===e?"source":"target")},t.prototype.handlePanelSort=function(e,t,a,r){var n=this,o=this.state,i=o.value,l=o.leftValue,s="right"===e?i:l,h=s.indexOf(t),d=s.indexOf(a),u="before"===r?d:d+1;h!==u&&(s.splice(h,1),h<u&&(u-=1),s.splice(u,0,t),this.setState({innerUpdate:!0,value:i,leftValue:l},(function(){n.props.onSort(s,e)})))},t.prototype.handleMoveItem=function(e){var t,a=void 0,r=void 0,n=void 0,o=void 0,i=this.state,l=i.value,s=i.leftValue,h=i.leftCheckedValue,d=i.rightCheckedValue;"right"===e?(a=h.concat(l),r=s.filter((function(e){return-1===h.indexOf(e)})),n=h,o="leftCheckedValue"):(a=l.filter((function(e){return-1===d.indexOf(e)})),r=d.concat(s),n=d,o="rightCheckedValue");var u=((t={})[o]=[],t);this.setValueState(u,a,r,n,e)},t.prototype.handleSimpleMove=function(e,t){var a=void 0,r=void 0,n=this.state,o=n.value,i=n.leftValue;"right"===e?(a=[t].concat(o),r=i.filter((function(e){return e!==t}))):(a=o.filter((function(e){return e!==t})),r=[t].concat(i)),this.setValueState({},a,r,[t],e)},t.prototype.handleSimpleMoveAll=function(e){var t=void 0,a=void 0,r=void 0,n=this.props.dataSource,o=this.state,i=o.value,l=o.leftValue,s=n.reduce((function(e,t){return t.disabled&&e.push(t.value),e}),[]);"right"===e?(t=(r=l.filter((function(e){return-1===s.indexOf(e)}))).concat(i),a=l.filter((function(e){return s.indexOf(e)>-1}))):(r=i.filter((function(e){return-1===s.indexOf(e)})),t=i.filter((function(e){return s.indexOf(e)>-1})),a=r.concat(l)),this.setValueState({},t,a,r,e)},t.prototype.setValueState=function(e,t,a,r,n){var o=this,i=this.props.dataSource,l=function(){if("onChange"in o.props){var e=i.map((function(e){return e.value})),l=o.groupDatasource(t,e,i),s=o.groupDatasource(a,e,i),h=o.groupDatasource(r,e,i);o.props.onChange(t,l,{leftValue:a,leftData:s,movedValue:r,movedData:h,direction:n})}};"value"in this.props||(e.value=t,e.leftValue=a),Object.keys(e).length?this.setState(e,l):l()},t.prototype.renderCenter=function(){var e=this.props,t=e.prefix,a=e.mode,r=e.operations,n=e.disabled,o=e.leftDisabled,i=e.rightDisabled,l=e.locale,s=this.state,d=s.leftCheckedValue,u=s.rightCheckedValue;return h.createElement("div",{className:t+"transfer-operations"},"simple"===a?h.createElement(v,{className:t+"transfer-move",size:"large",type:"switch"}):[h.createElement(b,{"aria-label":l.moveToRight,key:"l2r",className:t+"transfer-operation",type:d.length?"primary":"normal",disabled:o||n||!d.length,onClick:this.handleMoveItem.bind(this,"right")},r[0]),h.createElement(b,{"aria-label":l.moveToLeft,key:"r2l",className:t+"transfer-operation",type:u.length?"primary":"normal",disabled:i||n||!u.length,onClick:this.handleMoveItem.bind(this,"left")},r[1])])},t.prototype.render=function(){var e=this.props,a=e.prefix,r=e.mode,n=e.disabled,o=e.className,i=e.dataSource,d=e.locale,u=e.showSearch,c=e.filter,p=e.onSearch,f=e.leftDisabled,g=e.rightDisabled,m=e.searchPlaceholder,v=e.notFoundContent,b=e.titles,y=e.listClassName,C=e.listStyle,D=e.itemRender,S=e.sortable,V=e.useVirtual,k=e.rtl,O=e.id,x=e.children,E=e.showCheckAll,I=this.state,N=I.value,T=I.leftValue,P=I.leftCheckedValue,M=I.rightCheckedValue,R=i.map((function(e){return e.value})),w=this.groupDatasource(T,R,i),F=this.groupDatasource(N,R,i),j={prefix:a,mode:r,locale:d,showSearch:u,filter:c,onSearch:p,searchPlaceholder:m,notFoundContent:v,listClassName:y,listStyle:C,itemRender:D,onMove:this.handleSimpleMove,onMoveAll:this.handleSimpleMoveAll,onChange:this.handlePanelChange,sortable:S,useVirtual:V,onSort:this.handlePanelSort,baseId:O,customerList:x,showCheckAll:E},H=L(Object.keys(t.propTypes),this.props);return k&&(H.dir="rtl"),h.createElement("div",s({className:l(a+"transfer",o),id:O},H),h.createElement(A,s({},j,{position:"left",dataSource:w,disabled:f||n,value:P,title:b[0]})),this.renderCenter(),h.createElement(A,s({},j,{position:"right",dataSource:F,disabled:g||n,value:M,title:b[1]})))},t}(h.Component),T.contextTypes={prefix:d.string},T.propTypes=s({},m.propTypes,{prefix:d.string,pure:d.bool,rtl:d.bool,className:d.string,mode:d.oneOf(["normal","simple"]),dataSource:d.arrayOf(d.object),value:d.arrayOf(d.string),defaultValue:d.arrayOf(d.string),onChange:d.func,onSelect:d.func,disabled:d.bool,leftDisabled:d.bool,rightDisabled:d.bool,itemRender:d.func,showSearch:d.bool,filter:d.func,onSearch:d.func,searchPlaceholder:d.string,notFoundContent:d.node,titles:d.arrayOf(d.node),operations:d.arrayOf(d.node),defaultLeftChecked:d.arrayOf(d.string),defaultRightChecked:d.arrayOf(d.string),listClassName:d.string,listStyle:d.object,sortable:d.bool,onSort:d.func,locale:d.object,id:d.string,children:d.func,useVirtual:d.bool,showCheckAll:d.bool}),T.defaultProps={prefix:"next-",pure:!1,mode:"normal",dataSource:[],defaultValue:[],disabled:!1,leftDisabled:!1,rightDisabled:!1,showCheckAll:!0,itemRender:function(e){return e.label},showSearch:!1,filter:function(e,t){var a="";return function e(t){h.isValidElement(t)&&t.props.children?h.Children.forEach(t.props.children,e):"string"==typeof t&&(a+=t)}(t.label),a.length>=e.length&&a.indexOf(e)>-1},onSearch:function(){},notFoundContent:"Not Found",titles:[],operations:[],defaultLeftChecked:[],defaultRightChecked:[],sortable:!1,onSort:function(){},locale:y.Transfer},P);H.displayName="Transfer";var z=R(g(H));export{z as T};
