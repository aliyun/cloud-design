import{D as e,u as t,o as a,i as r,_ as n,d as o,e as i,f as l,g as s,r as d,p as h,V as u,W as c,X as p,L as f,j as g,c as m,b as v,t as b,y}from"./index.4497680a.js";var C,D,S,V,k=e.Item,O=e.CheckboxItem,x=t.bindCtx,E=a.pickOthers,I=r.getOffset,N=(D=C=function(e){function t(a){o(this,t);var r=i(this,e.call(this,a));return r.state={highlight:!1},x(r,["getItemDOM","handleClick","handleDragStart","handleDragOver","handleDragEnd","handleDrop"]),r}return n(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.needHighlight&&(this.addHighlightTimer=setTimeout((function(){e.setState({highlight:!0})}),1),this.removeHighlightTimer=setTimeout((function(){e.setState({highlight:!1})}),201))},t.prototype.componentWillUnmount=function(){clearTimeout(this.addHighlightTimer),clearTimeout(this.removeHighlightTimer)},t.prototype.getItemDOM=function(e){this.item=e},t.prototype.handleClick=function(){var e=this.props;(0,e.onClick)("left"===e.panelPosition?"right":"left",e.item.value)},t.prototype.handleDragStart=function(e){e&&e.dataTransfer&&"function"==typeof e.dataTransfer.setData&&e.dataTransfer.setData("text/plain",e.target.id);var t=this.props;(0,t.onDragStart)(t.panelPosition,t.item.value)},t.prototype.getDragGap=function(e){var t=I(e.currentTarget).top,a=e.currentTarget.offsetHeight;return e.pageY<=t+a/2?"before":"after"},t.prototype.handleDragOver=function(e){var t=this.props,a=t.panelPosition,r=t.dragPosition,n=t.onDragOver,o=t.item;if(a===r){e.preventDefault();var i=this.getDragGap(e);this.dragGap!==i&&(this.dragGap=i,n(o.value))}},t.prototype.handleDragEnd=function(){(0,this.props.onDragEnd)()},t.prototype.handleDrop=function(e){e.preventDefault();var t=this.props,a=t.onDrop,r=t.item;a(t.panelPosition,t.dragValue,r.value,this.dragGap)},t.prototype.render=function(){var e,a=this.props,r=a.prefix,n=a.mode,o=a.checked,i=a.disabled,h=a.item,u=a.onCheck,c=a.itemRender,p=a.draggable,f=a.dragOverValue,g=a.panelPosition,m=a.dragPosition,v=E(Object.keys(t.propTypes),this.props),b=this.state.highlight,y="simple"===n,C=l(((e={})[r+"transfer-panel-item"]=!0,e[r+"insert-"+this.dragGap]=f===h.value&&g===m,e[r+"focused"]=b,e[r+"simple"]=y,e)),D=c(h),S=s({ref:this.getItemDOM,className:C,children:D,disabled:i,draggable:p&&!i,onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragEnd:this.handleDragEnd,onDrop:this.handleDrop},v),V=void 0;return"string"==typeof D&&(V=D),y?(S.disabled||(S.onClick=this.handleClick),d.createElement(k,s({title:V},S))):d.createElement(O,s({checked:o,onChange:u.bind(this,h.value),title:V},S))},t}(d.Component),C.menuChildType=O.menuChildType,C.propTypes={prefix:h.string,mode:h.oneOf(["normal","simple"]),value:h.array,disabled:h.bool,item:h.object,onCheck:h.func,onClick:h.func,needHighlight:h.bool,itemRender:h.func,draggable:h.bool,onDragStart:h.func,onDragOver:h.func,onDragEnd:h.func,onDrop:h.func,dragPosition:h.oneOf(["left","right"]),dragValue:h.string,dragOverValue:h.string,panelPosition:h.oneOf(["left","right"])},D);N.displayName="TransferItem";var T,P,M=t.bindCtx,A=(V=S=function(t){function a(e,r){o(this,a);var n=i(this,t.call(this,e,r));return n.state={searchedValue:"",dragValue:null,dragOverValue:null},n.footerId=e.baseId?u.escapeForId(e.baseId+"-panel-footer-"+e.position):"",n.headerId=e.baseId?u.escapeForId(e.baseId+"-panel-header-"+e.position):"",M(n,["handleCheck","handleAllCheck","handleSearch","handleItemDragStart","handleItemDragOver","handleItemDragEnd","handleItemDrop","getListDOM"]),n.firstRender=!0,n}return n(a,t),a.prototype.componentDidMount=function(){this.firstRender=!1},a.prototype.componentDidUpdate=function(e){e.dataSource.length!==this.props.dataSource.length&&this.list&&this.list.scrollTop>0&&(this.list.scrollTop=0),this.searched=!1},a.prototype.getListDOM=function(e){this.list=e},a.prototype.getListData=function(e,t){var a=this,r=this.props,n=r.prefix,o=r.position,i=r.mode,l=r.value,h=r.onMove,u=r.disabled,c=r.itemRender,p=r.sortable,f=this.state,g=f.dragPosition,m=f.dragValue,v=f.dragOverValue;return e.map((function(e){var r="title"in e?{title:e.title}:{};return d.createElement(N,s({key:e.value,prefix:n,mode:i,checked:l.indexOf(e.value)>-1,disabled:u||e.disabled,item:e,onCheck:a.handleCheck,onClick:h,needHighlight:!a.firstRender&&!a.searched&&!t,itemRender:c,draggable:p,onDragStart:a.handleItemDragStart,onDragOver:a.handleItemDragOver,onDragEnd:a.handleItemDragEnd,onDrop:a.handleItemDrop,dragPosition:g,dragValue:m,dragOverValue:v,panelPosition:o},r))}))},a.prototype.handleAllCheck=function(e){var t=this.props,a=t.position,r=t.onChange,n=void 0;n=e?this.enabledDatasource.map((function(e){return e.value})):[],r&&r(a,n)},a.prototype.handleCheck=function(e,t){var a=this.props,r=a.position,n=a.value,o=a.onChange,i=[].concat(n),l=n.indexOf(e);t&&-1===l?i.push(e):!t&&l>-1&&i.splice(l,1),o&&o(r,i)},a.prototype.handleSearch=function(e){this.setState({searchedValue:e}),this.searched=!0;var t=this.props;(0,t.onSearch)(e,t.position)},a.prototype.handleItemDragStart=function(e,t){this.setState({dragPosition:e,dragValue:t})},a.prototype.handleItemDragOver=function(e){this.setState({dragOverValue:e})},a.prototype.handleItemDragEnd=function(){this.setState({dragOverValue:null})},a.prototype.handleItemDrop=function(){var e;this.setState({dragOverValue:null}),(e=this.props).onSort.apply(e,arguments)},a.prototype.renderHeader=function(){var e=this.props,t=e.title,a=e.prefix;return d.createElement("div",{id:this.headerId,className:a+"transfer-panel-header"},t)},a.prototype.renderSearch=function(){var e=this.props,t=e.prefix,a=e.searchPlaceholder,r=e.locale;return d.createElement(c,{"aria-labelledby":this.headerId,shape:"simple",className:t+"transfer-panel-search",placeholder:a||r.searchPlaceholder,onChange:this.handleSearch})},a.prototype.renderList=function(t){var a,r=this.props,n=r.prefix,o=r.listClassName,i=r.listStyle,h=r.customerList,u=r.useVirtual,c=l(((a={})[n+"transfer-panel-list"]=!0,a[o]=!!o,a)),f=h&&h(this.props);return f?d.createElement("div",{className:c,style:i,ref:this.getListDOM},f):t.length?u?d.createElement("div",{className:c,style:s({position:"relative"},i)},d.createElement(p,{itemsRenderer:function(t,a){return d.createElement(e,{style:{border:"none"},ref:a},t)}},this.getListData(t,!0))):d.createElement(e,{className:c,style:i,ref:this.getListDOM},this.getListData(t)):d.createElement("div",{className:c,style:i},this.renderNotFoundContent())},a.prototype.renderNotFoundContent=function(){var e=this.props,t=e.prefix,a=e.notFoundContent;return d.createElement("div",{className:t+"transfer-panel-not-found-container"},d.createElement("div",{className:t+"transfer-panel-not-found"},a))},a.prototype.renderFooter=function(){var e=this.props,t=e.prefix,a=e.position,r=e.mode,n=e.disabled,o=e.locale,i=e.showCheckAll;if("simple"===r){var s,h=this.props.onMoveAll,u=l(((s={})[t+"transfer-panel-move-all"]=!0,s[t+"disabled"]=n,s));return d.createElement("div",{className:t+"transfer-panel-footer"},d.createElement("a",{className:u,onClick:h.bind(this,"left"===a?"right":"left")},o.moveAll))}var c=this.props,p=c.value,g=c.dataSource,m=p.length,v=g.length,b=this.enabledDatasource.length,y=m>0&&m>=b,C=m>0&&m<b,D=v>1?o.items:o.item,S=0===m?v+" "+D:m+"/"+v+" "+D;return d.createElement("div",{className:t+"transfer-panel-footer"},i&&d.createElement(f,{disabled:n,checked:y,indeterminate:C,onChange:this.handleAllCheck,"aria-labelledby":this.footerId}),d.createElement("span",{className:t+"transfer-panel-count",id:this.footerId},S))},a.prototype.render=function(){var e=this.props,t=e.prefix,a=e.title,r=e.showSearch,n=e.filter,o=this.state.searchedValue,i=this.props.dataSource;return this.enabledDatasource=i.filter((function(e){return!e.disabled})),r&&o&&(i=i.filter((function(e){return n(o,e)}))),d.createElement("div",{className:t+"transfer-panel"},a?this.renderHeader():null,r?this.renderSearch():null,this.renderList(i),this.renderFooter())},a}(d.Component),S.propTypes={prefix:h.string,position:h.oneOf(["left","right"]),mode:h.oneOf(["normal","simple"]),dataSource:h.array,value:h.array,onChange:h.func,onMove:h.func,onMoveAll:h.func,disabled:h.bool,locale:h.object,title:h.node,showSearch:h.bool,filter:h.func,onSearch:h.func,searchPlaceholder:h.string,notFoundContent:h.node,listClassName:h.string,listStyle:h.object,itemRender:h.func,sortable:h.bool,onSort:h.func,baseId:h.string,customerList:h.func,useVirtual:h.bool,showCheckAll:h.bool},V);A.displayName="TransferPanel";var L=m.config,R=t.bindCtx,w=a.pickOthers,F=function(e,t){return e.map((function(e){return e.value})).filter((function(e){return-1===t.indexOf(e)}))},j=function(e,t,a){var r={left:[],right:[]};(e.length||t.length)&&a.map((function(e){return e.value})).forEach((function(a){e.indexOf(a)>-1?r.left.push(a):t.indexOf(a)>-1&&r.right.push(a)}));return r},H=(P=T=function(e){function t(a,r){o(this,t);var n=i(this,e.call(this,a,r)),l=a.value,s=a.defaultValue,h=a.defaultLeftChecked,u=a.defaultRightChecked,c=a.dataSource,p=a.rtl,f=a.operations;0===f.length&&(f.push(d.createElement(v,{rtl:p,type:"arrow-right"})),f.push(d.createElement(v,{rtl:p,type:"arrow-left"})));var g=j(t.normalizeValue(h),t.normalizeValue(u),c),m=g.left,b=g.right,y=t.normalizeValue("value"in a?l:s);return n.state={value:y,leftCheckedValue:m,rightCheckedValue:b,leftValue:F(c,y)},R(n,["handlePanelChange","handlePanelSort","handleMoveItem","handleSimpleMove","handleSimpleMoveAll"]),n}return n(t,e),t.normalizeValue=function(e){return e?Array.isArray(e)?e:[e]:[]},t.getDerivedStateFromProps=function(e,a){var r=a.innerUpdate,n=a.value,o=a.leftValue;if(r)return{innerUpdate:!1,value:n,leftValue:o};var i={},l=void 0;if("value"in e){var s=t.normalizeValue(e.value);i.value=s,l=s}else l=a.value;i.leftValue=F(e.dataSource,l);var d=j(a.leftCheckedValue,a.rightCheckedValue,e.dataSource),h=d.left,u=d.right;return i.leftCheckedValue=h,i.rightCheckedValue=u,i},t.prototype.groupDatasource=function(e,t,a){return e.reduce((function(e,r){var n=t.indexOf(r);return n>-1&&e.push(a[n]),e}),[])},t.prototype.handlePanelChange=function(e,t){var a,r="left"===e?"leftCheckedValue":"rightCheckedValue";this.setState(((a={innerUpdate:!0})[r]=t,a))},t.prototype.handlePanelSort=function(e,t,a,r){var n=this,o=this.state,i=o.value,l=o.leftValue,s="right"===e?i:l,d=s.indexOf(t),h=s.indexOf(a),u="before"===r?h:h+1;d!==u&&(s.splice(d,1),d<u&&(u-=1),s.splice(u,0,t),this.setState({innerUpdate:!0,value:i,leftValue:l},(function(){n.props.onSort(s,e)})))},t.prototype.handleMoveItem=function(e){var t,a=void 0,r=void 0,n=void 0,o=void 0,i=this.state,l=i.value,s=i.leftValue,d=i.leftCheckedValue,h=i.rightCheckedValue;"right"===e?(a=d.concat(l),r=s.filter((function(e){return-1===d.indexOf(e)})),n=d,o="leftCheckedValue"):(a=l.filter((function(e){return-1===h.indexOf(e)})),r=h.concat(s),n=h,o="rightCheckedValue");var u=((t={})[o]=[],t);this.setValueState(u,a,r,n,e)},t.prototype.handleSimpleMove=function(e,t){var a=void 0,r=void 0,n=this.state,o=n.value,i=n.leftValue;"right"===e?(a=[t].concat(o),r=i.filter((function(e){return e!==t}))):(a=o.filter((function(e){return e!==t})),r=[t].concat(i)),this.setValueState({},a,r,[t],e)},t.prototype.handleSimpleMoveAll=function(e){var t=void 0,a=void 0,r=void 0,n=this.props.dataSource,o=this.state,i=o.value,l=o.leftValue,s=n.reduce((function(e,t){return t.disabled&&e.push(t.value),e}),[]);"right"===e?(t=(r=l.filter((function(e){return-1===s.indexOf(e)}))).concat(i),a=l.filter((function(e){return s.indexOf(e)>-1}))):(r=i.filter((function(e){return-1===s.indexOf(e)})),t=i.filter((function(e){return s.indexOf(e)>-1})),a=r.concat(l)),this.setValueState({},t,a,r,e)},t.prototype.setValueState=function(e,t,a,r,n){var o=this,i=this.props.dataSource,l=function(){if("onChange"in o.props){var e=i.map((function(e){return e.value})),l=o.groupDatasource(t,e,i),s=o.groupDatasource(a,e,i),d=o.groupDatasource(r,e,i);o.props.onChange(t,l,{leftValue:a,leftData:s,movedValue:r,movedData:d,direction:n})}};"value"in this.props||(e.value=t,e.leftValue=a),Object.keys(e).length?this.setState(e,l):l()},t.prototype.renderCenter=function(){var e=this.props,t=e.prefix,a=e.mode,r=e.operations,n=e.disabled,o=e.leftDisabled,i=e.rightDisabled,l=e.locale,s=this.state,h=s.leftCheckedValue,u=s.rightCheckedValue;return d.createElement("div",{className:t+"transfer-operations"},"simple"===a?d.createElement(v,{className:t+"transfer-move",size:"large",type:"switch"}):[d.createElement(b,{"aria-label":l.moveToRight,key:"l2r",className:t+"transfer-operation",type:h.length?"primary":"normal",disabled:o||n||!h.length,onClick:this.handleMoveItem.bind(this,"right")},r[0]),d.createElement(b,{"aria-label":l.moveToLeft,key:"r2l",className:t+"transfer-operation",type:u.length?"primary":"normal",disabled:i||n||!u.length,onClick:this.handleMoveItem.bind(this,"left")},r[1])])},t.prototype.render=function(){var e=this.props,a=e.prefix,r=e.mode,n=e.disabled,o=e.className,i=e.dataSource,h=e.locale,u=e.showSearch,c=e.filter,p=e.onSearch,f=e.leftDisabled,g=e.rightDisabled,m=e.searchPlaceholder,v=e.notFoundContent,b=e.titles,y=e.listClassName,C=e.listStyle,D=e.itemRender,S=e.sortable,V=e.useVirtual,k=e.rtl,O=e.id,x=e.children,E=e.showCheckAll,I=this.state,N=I.value,T=I.leftValue,P=I.leftCheckedValue,M=I.rightCheckedValue,L=i.map((function(e){return e.value})),R=this.groupDatasource(T,L,i),F=this.groupDatasource(N,L,i),j={prefix:a,mode:r,locale:h,showSearch:u,filter:c,onSearch:p,searchPlaceholder:m,notFoundContent:v,listClassName:y,listStyle:C,itemRender:D,onMove:this.handleSimpleMove,onMoveAll:this.handleSimpleMoveAll,onChange:this.handlePanelChange,sortable:S,useVirtual:V,onSort:this.handlePanelSort,baseId:O,customerList:x,showCheckAll:E},H=w(Object.keys(t.propTypes),this.props);return k&&(H.dir="rtl"),d.createElement("div",s({className:l(a+"transfer",o),id:O},H),d.createElement(A,s({},j,{position:"left",dataSource:R,disabled:f||n,value:P,title:b[0]})),this.renderCenter(),d.createElement(A,s({},j,{position:"right",dataSource:F,disabled:g||n,value:M,title:b[1]})))},t}(d.Component),T.contextTypes={prefix:h.string},T.propTypes=s({},m.propTypes,{prefix:h.string,pure:h.bool,rtl:h.bool,className:h.string,mode:h.oneOf(["normal","simple"]),dataSource:h.arrayOf(h.object),value:h.arrayOf(h.string),defaultValue:h.arrayOf(h.string),onChange:h.func,disabled:h.bool,leftDisabled:h.bool,rightDisabled:h.bool,itemRender:h.func,showSearch:h.bool,filter:h.func,onSearch:h.func,searchPlaceholder:h.string,notFoundContent:h.node,titles:h.arrayOf(h.node),operations:h.arrayOf(h.node),defaultLeftChecked:h.arrayOf(h.string),defaultRightChecked:h.arrayOf(h.string),listClassName:h.string,listStyle:h.object,sortable:h.bool,onSort:h.func,locale:h.object,id:h.string,children:h.func,useVirtual:h.bool,showCheckAll:h.bool}),T.defaultProps={prefix:"next-",pure:!1,mode:"normal",dataSource:[],defaultValue:[],disabled:!1,leftDisabled:!1,rightDisabled:!1,showCheckAll:!0,itemRender:function(e){return e.label},showSearch:!1,filter:function(e,t){var a="";return function e(t){d.isValidElement(t)&&t.props.children?d.Children.forEach(t.props.children,e):"string"==typeof t&&(a+=t)}(t.label),a.length>=e.length&&a.indexOf(e)>-1},onSearch:function(){},notFoundContent:"Not Found",titles:[],operations:[],defaultLeftChecked:[],defaultRightChecked:[],sortable:!1,onSort:function(){},locale:y.Transfer},P);H.displayName="Transfer";var z=L(g(H));export{z as T};
