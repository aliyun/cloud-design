import{j as e,x as t,w as n,_ as i,d as a,e as o,f as s,r,g as p,y as l,o as u,b as c,n as d,c as m,p as f,C as h}from"./index.85ae9c06.js";import{m as g}from"./moment.5a008426.js";import{b as v,T as b,d as C,a as S}from"./index.6f3ee6fb.js";var T,y,P,V=t.Popup,k=n.noop,w=h.TimePicker,N=(y=T=function(e){function t(n,i){a(this,t);var s=o(this,e.call(this,n,i));P.call(s);var r=v(n.value||n.defaultValue,n.format);return s.inputAsString="string"==typeof(n.value||n.defaultValue),s.state={value:r,inputStr:"",inputing:!1,visible:n.visible||n.defaultVisible},s}return i(t,e),t.getDerivedStateFromProps=function(e){var t={};return"value"in e&&(t.value=v(e.value,e.format)),"visible"in e&&(t.visible=e.visible),t},t.prototype.onValueChange=function(e){var t=this.inputAsString&&e?e.format(this.props.format):e;this.props.onChange(t)},t.prototype.renderPreview=function(e){var t=this.props,n=t.prefix,i=t.format,a=t.className,o=t.renderPreview,l=this.state.value,u=s(a,n+"form-preview"),c=l?l.format(i):"";return"function"==typeof o?r.createElement("div",p({},e,{className:u}),o(l,this.props)):r.createElement("p",p({},e,{className:u}),c)},t.prototype.render=function(){var e,n,i=this.props,a=i.prefix,o=i.label,m=i.state,f=i.placeholder,h=i.size,g=i.format,v=i.hasClear,C=i.hourStep,S=i.minuteStep,T=i.secondStep,y=i.disabledHours,P=i.disabledMinutes,k=i.disabledSeconds,w=i.renderTimeMenuItems,N=i.inputProps,O=i.popupAlign,x=i.popupTriggerType,E=i.popupContainer,I=i.popupStyle,M=i.popupClassName,H=i.popupProps,j=i.popupComponent,A=i.popupContent,z=i.followTrigger,B=i.disabled,K=i.className,D=i.locale,F=i.rtl,_=i.isPreview,q=l(i,["prefix","label","state","placeholder","size","format","hasClear","hourStep","minuteStep","secondStep","disabledHours","disabledMinutes","disabledSeconds","renderTimeMenuItems","inputProps","popupAlign","popupTriggerType","popupContainer","popupStyle","popupClassName","popupProps","popupComponent","popupContent","followTrigger","disabled","className","locale","rtl","isPreview"]),G=this.state,J=G.value,L=G.inputStr,Q=G.inputing,R=G.visible,U=s(((e={})[a+"time-picker-trigger"]=!0,e));if(F&&(q.dir="rtl"),_)return this.renderPreview(u.pickOthers(q,t.PropTypes));var W=Q?L:J&&J.format(g)||"",X=p({},N,{size:h,disabled:B,value:W,hasClear:J&&v,onChange:this.onInputChange,onBlur:this.onInputBlur,onPressEnter:this.onInputBlur,onKeyDown:this.onKeyown,hint:r.createElement(c,{type:"clock",className:a+"time-picker-symbol-clock-icon"})}),Y=r.createElement("div",{className:U},r.createElement(d,p({},X,{label:o,state:m,placeholder:f||D.placeholder,className:a+"time-picker-input"}))),Z={prefix:a,locale:D,value:J,disabled:B,showHour:g.indexOf("H")>-1,showSecond:g.indexOf("s")>-1,showMinute:g.indexOf("m")>-1,hourStep:C,minuteStep:S,secondStep:T,disabledHours:y,disabledMinutes:P,disabledSeconds:k,renderTimeMenuItems:w,onSelect:this.onTimePanelSelect},$=s(((n={})[a+"time-picker"]=!0,n[a+"time-picker-"+h]=h,n[a+"disabled"]=B,n),K),ee=j||V;return r.createElement("div",p({},u.pickOthers(t.propTypes,q),{className:$}),r.createElement(ee,p({autoFocus:!0,align:O},H,{followTrigger:z,visible:R,onVisibleChange:this.onVisibleChange,trigger:Y,container:E,disabled:B,triggerType:x,style:I,className:M}),A||r.createElement("div",{dir:q.dir,className:a+"time-picker-body"},r.createElement("div",{className:a+"time-picker-panel-header"},r.createElement(d,p({},X,{placeholder:g,className:a+"time-picker-panel-input"}))),r.createElement(b,Z))))},t}(r.Component),T.propTypes=p({},m.propTypes,{prefix:f.string,rtl:f.bool,label:f.node,state:f.oneOf(["error","success"]),placeholder:f.string,value:C,defaultValue:C,size:f.oneOf(["small","medium","large"]),hasClear:f.bool,format:f.string,hourStep:f.number,minuteStep:f.number,secondStep:f.number,disabledHours:f.func,disabledMinutes:f.func,disabledSeconds:f.func,renderTimeMenuItems:f.func,visible:f.bool,defaultVisible:f.bool,popupContainer:f.any,popupAlign:f.string,popupTriggerType:f.oneOf(["click","hover"]),onVisibleChange:f.func,popupStyle:f.object,popupClassName:f.string,popupProps:f.object,followTrigger:f.bool,disabled:f.bool,isPreview:f.bool,renderPreview:f.func,onChange:f.func,className:f.string,name:f.string,inputProps:f.object,popupComponent:f.elementType,popupContent:f.node}),T.defaultProps={prefix:"next-",rtl:!1,locale:w,size:"medium",format:"HH:mm:ss",hasClear:!0,disabled:!1,popupAlign:"tl tl",popupTriggerType:"click",onChange:k,onVisibleChange:k},P=function(){var e=this;this.onClearValue=function(){e.setState({value:null}),e.state.value&&e.onValueChange(null)},this.onInputChange=function(t,n,i){"value"in e.props?"clear"===i&&(n.stopPropagation(),e.onValueChange(null)):("clear"!==i&&t||(n.stopPropagation(),e.onClearValue()),e.setState({inputStr:t,inputing:!0}))},this.onInputBlur=function(){var t=e.state.inputStr;if(t){var n=e.props.format,i=g(t,n,!0);i.isValid()&&(e.setState({value:i,inputStr:""}),e.onValueChange(i)),e.setState({inputing:!1})}},this.onKeyown=function(t){var n=e.state,i=n.value,a=n.inputStr,o=e.props,s=o.format,r=o.hourStep,p=void 0===r?1:r,l=o.minuteStep,u=void 0===l?1:l,c=o.secondStep,d=void 0===c?1:c,m=o.disabledMinutes,f="second";o.disabledSeconds&&(f=m?"hour":"minute");var h=S(t,{format:s,timeInputStr:a,steps:{hour:p,minute:u,second:d},value:i},f);h&&e.onInputChange(h)},this.onTimePanelSelect=function(t){"value"in e.props||e.setState({value:t,inputing:!1}),e.state.value&&t.valueOf()===e.state.value.valueOf()||e.onValueChange(t)},this.onVisibleChange=function(t,n){"visible"in e.props||e.setState({visible:t}),e.props.onVisibleChange(t,n)}},y);N.displayName="TimePicker";var O=e(N),x=m.config(O,{transform:function(e,t){if("defaultOpen"in e){t("defaultOpen","defaultVisible","TimePicker");var n=e,i=n.defaultOpen,a=l(n,["defaultOpen"]);e=p({defaultVisible:i},a)}if("open"in e){t("open","visible","TimePicker");var o=e,s=o.open,r=l(o,["open"]);e=p({visible:s},r)}if("onOpenChange"in e){t("onOpenChange","onVisibleChange","TimePicker");var u=e,c=u.onOpenChange,d=l(u,["onOpenChange"]);e=p({onVisibleChange:c},d)}return e}});export{x as N};
